<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>无标题文档</title>
    <link rel="stylesheet" href="/assembly/css/css.css"/>
    <link href="/assembly/css/style.css" rel="stylesheet" type="text/css"/>
    <script src="/plugins/jquery/jquery-1.9.1.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/assembly/css/easyui.css">
    <link rel="stylesheet" type="text/css" href="/assembly/css/icon.css">
    <script src="/plugins/easyui-1.5.5.7/jquery.min.js"></script>
    <script src="/plugins/jquery/jquery.json.min.js"></script>
    <script src="/plugins/easyui-1.5.5.7/jquery.easyui.min.js"></script>
    <script src="/plugins/easyui-1.5.5.7/locale/easyui-lang-zh_CN.js"></script>
    <script src="/plugins/moment.min.js"></script>
    <script src="/js/utils.js"></script>
    <script src="/js/easy_common.js"></script>
</head>
<body>
<div style="padding:10px; height:480px; overflow:auto">
    <div class="di"><span style="background-color:#FFF; padding-right:10px; font-size:15px; font-weight:600">报价信息</span></div>
    <form id="reMoney">
        <input name="id" id="id" type="hidden">
        <input name="rfqId" id="rfqId" type="hidden">
        <input name="rfqProductId" id="rfqProductId" type="hidden">
        <table width="100%" align="center" class="tablelist3">
            <tbody>
            <tr>
                <td align="right">询价编号: &nbsp;&nbsp;</td>
                <td align="left"><input name="numbering" id="numbering" readonly="readonly" type="text" class="dfinput" style="width: 150px;"/></td>
                <td align="right">单件号: &nbsp;&nbsp;</td>
                <td align="left"><input name="singleNum" id="singleNum" readonly="readonly" type="text" class="dfinput" style="width: 150px;"/></td>
                <td align="right">报价员: &nbsp;&nbsp;</td>
                <td align="left"><input name="pricingOffer" type="text" class="dfinput" style="width: 150px;"/></td>
            </tr>
            <tr>
                <td align="right">报价日: &nbsp;&nbsp;</td>
                <td align="left"><input name="pricingDate" type="text" class="easyui-datebox" style="width:150px;"/>
                </td>
                <td align="right">报价期限: &nbsp;&nbsp;</td>
                <td align="left"><input name="deadline" type="text" class="easyui-datebox" style="width:150px;"/></td>
                <td align="right">加工方法: &nbsp;&nbsp;</td>
                <td align="left"><input name="processingMethod" type="text" class="dfinput"
                                        style="width: 150px;"/></td>
            </tr>
            <tr>
                <td align="right">下料: &nbsp;&nbsp;</td>
                <td align="left"><input name="cuttingTop" type="text" class="dfinput" style="width: 150px;"/></td>
                <td align="right">下料: &nbsp;&nbsp;</td>
                <td align="left"><input name="cuttingCenter" type="text" class="dfinput" style="width: 150px;"/></td>
                <td align="right">下料: &nbsp;&nbsp;</td>
                <td align="left"><input name="cuttingBottom" type="text" class="dfinput" style="width: 150px;"/>
                    <a href="javascript:void(0)"><img src="/assembly/images/ck.png"  style="display:inline; vertical-align: middle;" onClick="openWindowu('','#')"/></a></td>
            </tr>
            <tr>
                <td align="right">重量: &nbsp;&nbsp;</td>
                <td align="left"><input name="cuttingWeight" type="text" class="dfinput" style="width: 150px;"/></td>
                <td align="right">利用率: &nbsp;&nbsp;</td>
                <td align="left"><input name="utilizationRate" type="text" class="dfinput" style="width: 150px;"/></td>
                <td align="right">材料单价: &nbsp;&nbsp;</td>
                <td align="left"><input name="unitPrice" type="text" class="dfinput" style="width: 150px;"/></td>
            </tr>
            <tr>
                <td align="right">最小壁厚: &nbsp;&nbsp;</td>
                <td align="left"><input name="minThickness" type="text" class="dfinput" style="width: 150px;"/></td>
                <td align="right">材料成本: &nbsp;&nbsp;</td>
                <td align="left"><input name="materialCosts" type="text" class="dfinput" style="width: 150px;"/>
                    <a href="javascript:void(0)"><img src="/assembly/images/ck.png"  style="display:inline; vertical-align: middle;" onclick="openWindowu('','#')"/></a></td>
                <td align="right">生产成本: &nbsp;&nbsp;</td>
                <td align="left"><input name="productionCosts" type="text" class="dfinput" style="width: 150px;"/>
                    <a href="javascript:void(0)"><img src="/assembly/images/ck.png"  style="display:inline; vertical-align: middle;"
                                                      onclick="openWindow('工序设置窗口','bjd-bj-gxsz.html')"/></a></td>
            </tr>
            <tr>
                <td align="right">其他成本: &nbsp;&nbsp;</td>
                <td align="left"><input name="otherCosts" type="text" class="dfinput" style="width: 150px;"/></td>
                <td align="right">封头价: &nbsp;&nbsp;</td>
                <td align="left"><input name="price" type="text" class="dfinput" style="width: 150px;"/></td>
                <td align="right">&nbsp;</td>
                <td align="left">&nbsp;</td>
            </tr>
            <tr>
                <td align="right">报价说明: &nbsp;&nbsp;</td>
                <td colspan="5" align="left"><textarea name="quoteDescription" class="dfinput"
                                                       style="width:680px; height:100px"></textarea></td>
            </tr>
            </tbody>
        </table>
    </form>
    <div class="di"><span style="background-color:#FFF; padding-right:10px; font-size:15px; font-weight:600">询价信息</span>
    </div>
    <form id="askMoney">
        <table width="100%" align="center" class="tablelist3">
            <tbody>
            <tr>
                <td width="10%" align="right">询价编号: &nbsp;</td>
                <td width="15%" align="left"><input name="numbering"  type="text" class="dfinput"
                                                    readonly="readonly"
                                                    style="width:130px;"/></td>
                <td width="10%" align="right">单件号: &nbsp;</td>
                <td width="15%" align="left"><input name="singleNum" type="text" class="dfinput" readonly="readonly"
                                                    style="width:130px;"></td>
                <td width="10%" align="right">售价: &nbsp;</td>
                <td width="15%" align="left"><input name="price" type="text" class="dfinput"
                                                    style="width:130px;"/></td>
                <td width="10%" align="right">报价: &nbsp;</td>
                <td width="15%" align="left"><input name="quote" type="text" class="dfinput"
                                                    style="width:130px;"/></td>
            </tr>
            <tr>
                <td align="right">材料来源: &nbsp;</td>
                <td align="left">
                    <select class="easyui-combobox"
                            name="materialSource"
                            style="height:35px; width:130px;"
                            id="materialSource"
                            editable="false"
                            data-options="panelHeight:'auto',valueField:'id', textField:'text'">
                    </select>
                </td>
                <td align="right">形状: &nbsp;</td>
                <td align="left">
                    <input type="hidden" id="shape" name="shape">
                    <input name="shapeName" id="shapeName" type="text" readonly=”readonly” class="dfinput"
                           style="width:130px; margin-right:5px;"/>
                    <a href="javascript:void(0)"></a>
                </td>
                <td align="right">材质: &nbsp;</td>
                <td colspan="3" align="left">
                    <input type="hidden" id="material" name="material">
                    <input name="materialName" id="materialName" type="text" readonly=”readonly” class="dfinput"
                           style="width:130px; margin-right:5px;"/>
                    <a href="javascript:void(0)"></a>
                </td>
            </tr>
            <tr>
                <td align="right"><input type="checkbox" name="diameterType" id="diameterType">
                    <span id="diameter_type">内</span>直径: &nbsp;&nbsp;
                </td>
                <td colspan="6" align="left"><input name="diameter" type="text" class="dfinput"
                                                    style="width:130px;"/></td>
                <td align="left"><input type="checkbox" name="materialRetest" id="materialRetest">
                    材料复验
                </td>
            </tr>
            <tr>
                <td align="right">壁厚: &nbsp;&nbsp;</td>
                <td align="left"><input name="thickness" type="text" class="dfinput" style="width:130px;"/></td>
                <td align="right">要求壁厚: &nbsp;&nbsp;</td>
                <td align="left"><input name="claimThickness" type="text" class="dfinput" style="width:130px;"/>
                </td>
                <td align="right">最小壁厚: &nbsp;&nbsp;</td>
                <td align="left"><input name="minThickness" type="text" class="dfinput" style="width:130px;"/></td>
                <td align="left">&nbsp;</td>
                <td align="left"><input type="checkbox" name="supervision" id="supervision">
                    要监检
                </td>
            </tr>
            <tr>
                <td align="right">大R: &nbsp;&nbsp;</td>
                <td align="left"><input name="bigR" type="text" class="dfinput" style="width:130px;"/></td>
                <td align="right">直边: &nbsp;&nbsp;</td>
                <td align="left"><input name="straightEdge" type="text" class="dfinput" style="width:130px;"/></td>
                <td align="left">&nbsp;</td>
                <td align="left">&nbsp;</td>
                <td align="left">&nbsp;</td>
                <td align="left"><input type="checkbox" name="testBord" id="testBord">
                    要试板
                </td>
            </tr>
            <tr>
                <td align="right">小r: &nbsp;&nbsp;</td>
                <td align="left"><input name="minR" type="text" class="dfinput" style="width:130px;"/></td>
                <td align="right"><input type="checkbox" id="heightType" name="heightType">
                    <span id="height_type">内</span>总高: &nbsp;&nbsp;
                </td>
                <td align="left"><input name="height" type="text" class="dfinput" style="width:130px;"/></td>
                <td align="right">数量: &nbsp;&nbsp;</td>
                <td align="left"><input name="num" type="text" class="dfinput" style="width:130px;"/></td>
                <td align="left">&nbsp;</td>
                <td align="left"><input type="checkbox" name="stamp" id="stamp">
                    要钢印
                </td>
            </tr>
            <tr>
                <td align="right">制造标准: &nbsp;&nbsp;</td>
                <td colspan="2" align="left">
                    <select class="easyui-combobox"
                            name="standards"
                            style="height:35px; width:130px;"
                            id="standards"
                            editable="false"
                            data-options="panelHeight:'auto',valueField:'id', textField:'text'">
                    </select>
                </td>
                <td align="center">&nbsp;</td>
                <td align="center">&nbsp;</td>
                <td align="center">&nbsp;</td>
                <td align="center">&nbsp;</td>
                <td><input type="checkbox" name="heatTreatment" id="heatTreatment">
                    热处理
                </td>
            </tr>
            <tr>
                <td align="right">其他要求: &nbsp;&nbsp;</td>
                <td colspan="7" align="left"><textarea name="otherClaim" class="dfinput"
                                                       style="width:680px; height:100px"></textarea></td>
            </tr>
            <tr>
                <td align="right"><input type="checkbox" id="isFlaw" name="isFlaw">
                    探伤 &nbsp;
                </td>
                <td colspan="7" align="left">&nbsp;</td>
            </tr>
            <tr id="flawTR">
                <td align="right">探伤: &nbsp;&nbsp;</td>
                <td align="left">
                    <select class="easyui-combobox"
                            name="flawDetection"
                            style="height:35px; width:130px;"
                            id="flawDetection"
                            editable="false"
                            data-options="panelHeight:'auto',valueField:'id', textField:'text'">
                    </select>
                </td>
                <td align="right">探伤要求: &nbsp;&nbsp;</td>
                <td align="left">
                    <select class="easyui-combobox"
                            name="flawClaim"
                            style="height:35px; width:180px;"
                            id="flawClaim"
                            editable="false"
                            data-options="panelHeight:'auto',valueField:'id', textField:'text'">
                    </select>
                </td>
                <td align="right"></td>
                <td align="left"></td>
                <td align="left"></td>
                <td align="left"></td>
            </tr>
            </tbody>
        </table>
    </form>
</div>
<script src="/assembly/layer/layer.js"></script>
</body>
<script>
    let allDict = {};
    $(function () {
        ajaxDictQuery([{typeCode: 'SALE_MATERIAL_SOURCE'}, {typeCode: 'SALE_STANDARDS'}
            ,{typeCode: 'FLAW_CLAIM'},{typeCode: 'RT_REPORT'}], function (data) {
            allDict = data;
            setDictOptionKey(['materialSource'], 'SALE_MATERIAL_SOURCE');
            setDictOptionKey(['standards'], 'SALE_STANDARDS');
            setDictOptionKey(['flawClaim'], 'FLAW_CLAIM');
            setDictOptionKey(['flawDetection'], 'RT_REPORT');
        });
    });

    function getFormData() {
        //询价信息
        let obj = $('#reMoney').getData();
        obj.isFlaw = $('#isFlaw').is(":checked") ? 1 : 0;
        obj.flawDetection = $("#flawDetection").val();
        obj.flawClaim = $("#flawClaim").val();
        //报价信息
        return obj;
    }

    function initData(data) {
        if (data.business == 'rfq') {
            $('#reMoney').find('input,textarea').attr('disabled', true);
        } else {
            $('#askMoney').find('input,textarea').attr('disabled', true);
        }
        $('#askMoney').form('load', data);
        if (data.rfqId != null) {
            let arr = [{key: 'heatTreatment', value: data.heatTreatment}, {
                key: 'stamp',
                value: data.stamp
            }, {key: 'testBord', value: data.testBord}
                , {key: 'supervision', value: data.supervision}, {key: 'materialRetest', value: data.materialRetest},
                {key: 'isFlaw', value: data.isFlaw}, {
                    key: 'diameterType',
                    value: data.diameterType
                }, {key: 'heightType', value: data.heightType}];
            initCheckBox(arr);
            changeV();
        }
        $("#reMoney").form('load',data.quotationBean);
        $("#rfqId").val(data.rfqId);
        $("#numbering").val(data.numbering);
        $("#singleNum").val(data.singleNum);
        $("#rfqProductId").val(data.id);
    }

    $("#diameterType").change(function () {
        changeV();
    });

    $("#heightType").change(function () {
        changeV();
    });

    $("#isFlaw").change(function () {
        changeV();
    });

    function changeV() {
        if ($('#heightType').is(":checked")) {
            $("#height_type").html("外");
        } else {
            $("#height_type").html("内");
        }
        if ($('#diameterType').is(":checked")) {
            $("#diameter_type").html("外");
        } else {
            $("#diameter_type").html("内");
        }
        if ($('#isFlaw').is(":checked")) {
            $("#flawTR").show();
        } else {
            $("#flawTR").hide();
        }
    }

    function initCheckBox(arr) {
        for (let i = 0; i < arr.length; i++) {
            if (arr[i].value == 1) {
                $("#" + arr[i].key).prop("checked", true);
            }
        }
    }
</script>
</html>

